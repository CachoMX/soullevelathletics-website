---
import BaseLayout from '../../layouts/BaseLayout.astro';
import CTABanner from '../../components/CTABanner.astro';
import { services } from '../../data/services';
import type { GetStaticPaths } from 'astro';

export const getStaticPaths: GetStaticPaths = () => {
  return services.map((service) => ({
    params: { slug: service.slug },
    props: { service },
  }));
};

const { service } = Astro.props;

// Get other services for the "Other Programs" section
const otherServices = services.filter((s) => s.id !== service.id);
---

<BaseLayout
  title={service.title}
  description={service.description}
>
  <!-- Page Header -->
  <section class="pt-32 pb-16 md:pt-40 md:pb-20 bg-brand-black relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-brand-gold/5 to-transparent"></div>
    <div class="container-custom mx-auto px-4 md:px-8 relative">
      <a href="/services" class="inline-flex items-center gap-2 text-brand-gold hover:text-brand-gold-light transition-colors text-sm font-subheading uppercase tracking-wider mb-6 reveal">
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M7 16l-4-4m0 0l4-4m-4 4h18" />
        </svg>
        All Programs
      </a>
      <div class="flex items-start gap-4 mb-6 reveal" style="transition-delay: 0.1s;">
        <span class="text-5xl" aria-hidden="true">{service.icon}</span>
        <div>
          <h1 class="text-h1 text-white">
            {service.title}
          </h1>
        </div>
      </div>
      <p class="text-white/60 text-xl max-w-3xl reveal" style="transition-delay: 0.2s;">
        {service.description}
      </p>
    </div>
  </section>

  <!-- Service Details -->
  <section class="section-padding bg-brand-black">
    <div class="container-custom mx-auto">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        <!-- Main Content -->
        <div class="lg:col-span-2 space-y-12">
          <!-- What's Included -->
          <div class="reveal">
            <h2 class="text-h3 text-white mb-8 font-heading uppercase tracking-wider">
              What's Included
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              {service.details.map((detail) => (
                <div class="flex items-start gap-3 p-4 rounded-xl bg-brand-surface border border-white/5">
                  <svg class="w-5 h-5 text-brand-gold flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                  </svg>
                  <span class="text-white/80">{detail}</span>
                </div>
              ))}
            </div>
          </div>

          <!-- Who It's For -->
          <div class="reveal">
            <h2 class="text-h3 text-white mb-6 font-heading uppercase tracking-wider">
              Who This Is For
            </h2>
            <p class="text-white/70 text-lg leading-relaxed">
              {service.forWhom}
            </p>
          </div>

          <!-- What to Expect -->
          <div class="reveal">
            <h2 class="text-h3 text-white mb-6 font-heading uppercase tracking-wider">
              What to Expect
            </h2>
            <div class="space-y-4 text-white/70 text-lg leading-relaxed">
              <p>
                Every session begins with a targeted warm-up designed to prepare your body for the work ahead. From there, Coach Chris tailors each workout to your current level while pushing you toward your goals.
              </p>
              <p>
                Expect high intensity, constant feedback, and training methods drawn directly from professional-level experience. You will be challenged, you will grow, and you will see real results.
              </p>
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="space-y-6">
          <!-- Book CTA -->
          <div class="card p-8 text-center sticky top-28 reveal">
            <h3 class="font-heading text-xl uppercase tracking-wider text-white mb-4">
              Ready to Start?
            </h3>
            <p class="text-white/60 text-sm mb-6">
              Book a session and experience the Soul Level difference.
            </p>
            <a href="/contact" class="btn-primary w-full mb-4">
              Book This Program
            </a>
            <a href="tel:+18187433100" class="btn-secondary btn-small w-full">
              Call (818) 743-3100
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Other Programs -->
  <section class="section-padding bg-brand-surface" aria-label="Other Programs">
    <div class="container-custom mx-auto">
      <div class="text-center mb-12 reveal">
        <h2 class="text-h2 text-white">Other Programs</h2>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {otherServices.slice(0, 3).map((s, i) => (
          <a
            href={`/services/${s.slug}`}
            class="card p-6 group block reveal"
            style={`transition-delay: ${i * 0.1}s;`}
          >
            <span class="text-3xl mb-3 block" aria-hidden="true">{s.icon}</span>
            <h3 class="font-heading text-lg uppercase tracking-wider text-white mb-2 group-hover:text-brand-gold transition-colors">
              {s.title}
            </h3>
            <p class="text-white/50 text-sm line-clamp-2">{s.description}</p>
          </a>
        ))}
      </div>
    </div>
  </section>

  <CTABanner />
</BaseLayout>
